<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- Mybatis mapper for OwnerOrderWarehouse  Auto generated by fms-mybatis-generator -->
<mapper namespace="com.arc.code.mapper.OwnerOrderWarehouseMapper">
	<resultMap id="ownerOrderWarehouseResultMap" type="com.arc.code.model.domain.owner.OwnerOrderWarehouse">
		<id property="id" column="id" />
		<result property="isDeleted" column="is_deleted"/>
		<result property="gmtCreate" column="gmt_create" />
		<result property="createOperator" column="create_operator"  />
		<result property="createOperatorId" column="create_operator_id" />
		<result property="gmtModified" column="gmt_modified" />
		<result property="modifyOperatorId" column="modify_operator_id" />
		<result property="modifyOperator" column="modify_operator"  />
		<result property="ownerOrderCode" column="owner_order_code"  />
		<result property="warehouseName" column="warehouse_name"  />
		<result property="warehouseId" column="warehouse_id" />
		<result property="warehouseCode" column="warehouse_code"  />
		<result property="carrierId" column="carrier_id" />
		<result property="carrier" column="carrier"  />
		<result property="shipperId" column="shipper_id" />
		<result property="shipper" column="shipper"  />
		<result property="customerRelaCode" column="customer_rela_code"  />
		<result property="expectInboundTime" column="expect_inbound_time" />
		<result property="inboundCode" column="inbound_code"  />
		<result property="inboundTime" column="inbound_time" />
		<result property="expectPickupTime" column="expect_pickup_time" />
		<result property="outboundCode" column="outbound_code"  />
		<result property="outboundTime" column="outbound_time" />
		<result property="status" column="status"  />
		<result property="storehouseArea" column="storehouse_area"  />
		<result property="storehouseAreaCode" column="storehouse_area_code"  />
		<result property="storehouseStock" column="storehouse_stock"  />
		<result property="driverName" column="driver_name"  />
		<result property="driverPhone" column="driver_phone"  />
		<result property="carNum" column="car_num"  />
		<result property="logisticsType" column="logistics_type"  />
	</resultMap>

	<sql id="sql_oms_owner_order_warehouse_all_Columns">
		id,
		is_deleted,
		gmt_create,
		create_operator,
		create_operator_id,
		gmt_modified,
		modify_operator_id,
		modify_operator,
		owner_order_code,
		warehouse_name,
		warehouse_id,
		warehouse_code,
		carrier_id,
		carrier,
		shipper_id,
		shipper,
		customer_rela_code,
		expect_inbound_time,
		inbound_code,
		inbound_time,
		expect_pickup_time,
		outbound_code,
		outbound_time,
		status,
		storehouse_area,
		storehouse_area_code,
		storehouse_stock,
		driver_name,
		driver_phone,
		car_num,
		logistics_type
	</sql>

	<insert id="save" parameterType="com.arc.code.model.domain.owner.OwnerOrderWarehouse" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO oms_owner_order_warehouse (
			is_deleted,
			gmt_create,
			create_operator,
			create_operator_id,
			gmt_modified,
			modify_operator_id,
			modify_operator,
			owner_order_code,
			warehouse_name,
			warehouse_id,
			warehouse_code,
			carrier_id,
			carrier,
			shipper_id,
			shipper,
			customer_rela_code,
			expect_inbound_time,
			inbound_code,
			inbound_time,
			expect_pickup_time,
			outbound_code,
			outbound_time,
			`status`,
			storehouse_area,
			storehouse_area_code,
			storehouse_stock,
			driver_name,
			driver_phone,
			car_num,
			logistics_type
		)
        VALUES (
			#{isDeleted},
			now(),
			#{createOperator},
			#{createOperatorId},
			now(),
			#{modifyOperatorId},
			#{modifyOperator},
			#{ownerOrderCode},
			#{warehouseName},
			#{warehouseId},
			#{warehouseCode},
			#{carrierId},
			#{carrier},
			#{shipperId},
			#{shipper},
			#{customerRelaCode},
			#{expectInboundTime},
			#{inboundCode},
			#{inboundTime},
			#{expectPickupTime},
			#{outboundCode},
			#{outboundTime},
			#{status},
			#{storehouseArea},
			#{storehouseAreaCode},
			#{storehouseStock},
			#{driverName},
			#{driverPhone},
			#{carNum},
			#{logisticsType}
		)
	</insert>

	<delete id="deleteByIdPhysical" parameterType="long">
		DELETE
		FROM oms_owner_order
		WHERE id = #{id}
	</delete>

	<!-- 逻辑删除 -->
	<update id="deleteByIdLogical" parameterType="long">
		UPDATE oms_owner_order_warehouse
		set gmt_modified = now(),
			is_deleted=1
		WHERE id = #{id}
		  AND is_deleted = 1
	</update>

	<update id="update" parameterType="com.arc.code.model.domain.owner.OwnerOrderWarehouse">
		UPDATE oms_owner_order_warehouse
		<set>
			gmt_modified= now()
			<if test="isDeleted != null">, is_deleted = #{isDeleted}</if>
			<if test="modifyOperatorId != null">, modify_operator_id = #{modifyOperatorId}</if>
			<if test="modifyOperator != null and modifyOperator != ''">, modify_operator = #{modifyOperator}</if>
			<if test="ownerOrderCode != null and ownerOrderCode != ''">, owner_order_code = #{ownerOrderCode}</if>
			<if test="warehouseName != null and warehouseName != ''">, warehouse_name = #{warehouseName}</if>
			<if test="warehouseId != null">, warehouse_id = #{warehouseId}</if>
			<if test="warehouseCode != null and warehouseCode != ''">, warehouse_code = #{warehouseCode}</if>
			<if test="carrierId != null">, carrier_id = #{carrierId}</if>
			<if test="carrier != null and carrier != ''">, carrier = #{carrier}</if>
			<if test="shipperId != null">, shipper_id = #{shipperId}</if>
			<if test="shipper != null and shipper != ''">, shipper = #{shipper}</if>
			<if test="customerRelaCode != null and customerRelaCode != ''">, customer_rela_code = #{customerRelaCode}</if>
			<if test="expectInboundTime != null">, expect_inbound_time = #{expectInboundTime}</if>
			<if test="inboundCode != null and inboundCode != ''">, inbound_code = #{inboundCode}</if>
			<if test="inboundTime != null">, inbound_time = #{inboundTime}</if>
			<if test="expectPickupTime != null">, expect_pickup_time = #{expectPickupTime}</if>
			<if test="outboundCode != null and outboundCode != ''">, outbound_code = #{outboundCode}</if>
			<if test="outboundTime != null">, outbound_time = #{outboundTime}</if>
			<if test="status != null and status != ''">, `status` = #{status}</if>
			<if test="storehouseArea != null and storehouseArea != ''">, storehouse_area = #{storehouseArea}</if>
			<if test="storehouseAreaCode != null and storehouseAreaCode != ''">, storehouse_area_code = #{storehouseAreaCode}</if>
			<if test="storehouseStock != null and storehouseStock != ''">, storehouse_stock = #{storehouseStock}</if>
			<if test="storehouseStockCode != null and storehouseStockCode != ''">, storehouse_stock_code = #{storehouseStockCode}</if>
			<if test="driverName != null and driverName != ''">, driver_name = #{driverName}</if>
			<if test="driverPhone != null and driverPhone != ''">, driver_phone = #{driverPhone}</if>
			<if test="carNum != null and carNum != ''">, car_num = #{carNum}</if>
			<if test="logisticsType != null and logisticsType != ''">, logistics_type = #{logisticsType}</if>
		</set>
		WHERE id = #{id}
	</update>


	<select id="get" parameterType="long" resultMap="ownerOrderWarehouseResultMap">
		SELECT <include refid="sql_oms_owner_order_warehouse_all_Columns" />
		FROM oms_owner_order_warehouse
		WHERE id = #{id}
		AND is_deleted = 0
	</select>


    <!-- 分页查询用的公共sql-->
    <sql id="sqlCommonWhere">
        <where>
            is_deleted = 0
            and shipper_id = #{shipperId}
            <if test="ownerOrderCode != null and ownerOrderCode != ''">AND owner_order_code = #{ownerOrderCode}</if>
            <if test="createOperator != null and createOperator != ''">AND create_operator LIKE
                CONCAT(#{createOperator},'%')
            </if>
            <if test="modifyOperator != null and modifyOperator != ''">AND modify_operator LIKE
                CONCAT(#{modifyOperator},'%')
            </if>
        </where>
    </sql>

	<select id="countForListPage" parameterType="com.arc.code.model.domain.owner.OwnerOrderWarehouse" resultType="int">
		SELECT count(*) FROM oms_owner_order_warehouse
		<include refid="sqlCommonWhere"/>
	</select>

    <select id="listPage" parameterType="com.arc.code.model.domain.owner.OwnerOrderWarehouse"
            resultMap="ownerOrderWarehouseResultMap">
        SELECT
        <include refid="sql_oms_owner_order_warehouse_all_Columns"/>
        FROM oms_owner_order_warehouse
        <include refid="sqlCommonWhere"/>
        order by id DESC
        limit #{start},#{pageSize}
    </select>


</mapper>